<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Â°îÁΩóÁâåÊ®°ÂùóÂÖ¨ÂÖ±ÁªÑ‰ª∂ -->
    <link rel="stylesheet" href="../../components/tarot-sidebar.css">
    <script src="../../components/tarot-sidebar.js"></script>
    
    <!-- ÂÖ¨ÂÖ±ÂØºËà™Ê†èÊ†∑Âºè -->
    <link rel="stylesheet" href="../../components/navigation.css">
    
    <title>‰∏âÂº†ÁâåÂç†Âçú - Á•ûÁßòÂ≠¶È¢ÑÊµã‰∏≠ÂøÉ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
            margin-left: 280px;
        }
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .star { position: absolute; background: #fff; border-radius: 50%; animation: twinkle 3s infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }
        
        .main-container { display: flex; min-height: 100vh; }
        .content-area { flex: 1; padding: 40px; }
        
        .page-title {
            font-size: 36px;
            background: linear-gradient(45deg, #9966cc, #6a5acd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            margin-bottom: 30px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { filter: drop-shadow(0 0 20px rgba(153, 102, 204, 0.5)); }
            to { filter: drop-shadow(0 0 30px rgba(106, 90, 205, 0.5)); }
        }
        
        .spread-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .spread-option {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #9966cc;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .spread-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(153, 102, 204, 0.3);
            border-color: #6a5acd;
        }
        
        .spread-icon {
            font-size: 48px;
            margin-bottom: 15px;
            color: #9966cc;
        }
        
        .spread-title {
            font-size: 20px;
            color: #9966cc;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .spread-description {
            color: #ccc;
            line-height: 1.6;
            font-size: 14px;
        }
        
        .question-section {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #9966cc;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            display: none;
        }
        
        .question-input {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #333;
            border-radius: 10px;
            color: #fff;
            font-size: 16px;
            margin-bottom: 20px;
            resize: vertical;
            min-height: 80px;
        }
        .question-input:focus {
            border-color: #9966cc;
            box-shadow: 0 0 15px rgba(153, 102, 204, 0.3);
            outline: none;
        }
        
        .start-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #9966cc, #6a5acd);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(153, 102, 204, 0.3);
        }
        
        .three-card-layout {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 40px 0;
            flex-wrap: wrap;
            display: none;
        }
        
        .card-position {
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            border: 2px dashed #666;
            border-radius: 15px;
            padding: 20px;
            min-width: 160px;
            transition: all 0.3s ease;
        }
        
        .card-position.filled {
            border: 2px solid #9966cc;
            background: rgba(153, 102, 204, 0.1);
        }
        
        .position-title {
            color: #9966cc;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .tarot-card {
            width: 120px;
            height: 200px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 2px solid #9966cc;
            border-radius: 15px;
            margin: 0 auto 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            transform-style: preserve-3d;
        }
        
        .tarot-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 15px 30px rgba(153, 102, 204, 0.4);
        }
        
        .card-back, .card-front {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 13px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 15px;
        }
        
        .card-back {
            background: linear-gradient(45deg, #9966cc, #6a5acd);
        }
        
        .card-front {
            background: rgba(0, 0, 0, 0.9);
            transform: rotateY(180deg);
        }
        
        .tarot-card.flipped {
            transform: rotateY(180deg);
        }
        
        .card-pattern {
            font-size: 48px;
            color: #fff;
        }
        
        .card-icon { font-size: 48px; margin-bottom: 15px; }
        .card-name {
            font-size: 14px;
            color: #9966cc;
            font-weight: bold;
            text-align: center;
            line-height: 1.3;
            margin-bottom: 10px;
        }
        
        .card-meaning {
            color: #ccc;
            font-size: 12px;
            text-align: center;
            line-height: 1.4;
        }
        
        .deck-area {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            flex-wrap: wrap;
            display: none;
        }
        
        .reading-result {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #9966cc;
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
            display: none;
        }
        .reading-result.show { display: block; animation: fadeInUp 0.5s ease; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        
        .result-title {
            color: #9966cc;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .interpretation {
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(153, 102, 204, 0.05);
            border-radius: 10px;
            border-left: 4px solid #9966cc;
        }
        
        .interpretation h4 {
            color: #6a5acd;
            margin-bottom: 10px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .interpretation p {
            color: #ccc;
            line-height: 1.6;
        }
        
        .new-reading-btn {
            background: linear-gradient(45deg, #9966cc, #6a5acd);
            border: none;
            border-radius: 25px;
            padding: 15px 40px;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
        }
        .new-reading-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(153, 102, 204, 0.4);
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            body { margin-left: 0; }
            .main-container { flex-direction: column; }
            .content-area { padding: 20px; }
            .three-card-layout { 
                flex-direction: column; 
                align-items: center;
                gap: 20px;
            }
            .tarot-card { width: 100px; height: 160px; }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="main-container">
        <!-- Â∑¶‰æßÂäüËÉΩËèúÂçï - ‰ΩøÁî®ÂÖ¨ÂÖ±ÁªÑ‰ª∂ -->
        <aside class="sidebar"></aside>

        <main class="content-area">
            <h1 class="page-title">üÉè ‰∏âÂº†ÁâåÂç†Âçú</h1>
            
            <div class="spread-selector" id="spreadSelector">
                <div class="spread-option" onclick="selectSpread('past-present-future')">
                    <div class="spread-icon">‚è≥</div>
                    <div class="spread-title">ËøáÂéª-Áé∞Âú®-Êú™Êù•</div>
                    <div class="spread-description">‰∫ÜËß£ËøáÂéªÁöÑÂΩ±Âìç„ÄÅÁé∞Âú®ÁöÑÁä∂ÂÜµÂíåÊú™Êù•ÁöÑÂèëÂ±ïË∂ãÂäø</div>
                </div>
                
                <div class="spread-option" onclick="selectSpread('situation-action-outcome')">
                    <div class="spread-icon">üéØ</div>
                    <div class="spread-title">Áä∂ÂÜµ-Ë°åÂä®-ÁªìÊûú</div>
                    <div class="spread-description">ÂàÜÊûêÂΩìÂâçÁä∂ÂÜµ„ÄÅÂª∫ËÆÆÁöÑË°åÂä®ÂíåÂèØËÉΩÁöÑÁªìÊûú</div>
                </div>
                
                <div class="spread-option" onclick="selectSpread('mind-body-spirit')">
                    <div class="spread-icon">üßò</div>
                    <div class="spread-title">ÂøÉÁÅµ-Ë∫´‰Ωì-Á≤æÁ•û</div>
                    <div class="spread-description">ÂÖ®Èù¢‰∫ÜËß£ÊÇ®Âú®‰∏çÂêåÂ±ÇÈù¢‰∏äÁöÑÁä∂ÊÄÅÂíåÈúÄÊ±Ç</div>
                </div>
                
                <div class="spread-option" onclick="selectSpread('stop-start-continue')">
                    <div class="spread-icon">üîÑ</div>
                    <div class="spread-title">ÂÅúÊ≠¢-ÂºÄÂßã-ÁªßÁª≠</div>
                    <div class="spread-description">ÊåáÂØºÊÇ®Â∫îËØ•ÂÅúÊ≠¢‰ªÄ‰πà„ÄÅÂºÄÂßã‰ªÄ‰πà„ÄÅÁªßÁª≠‰ªÄ‰πà</div>
                </div>
            </div>
            
            <div class="question-section" id="questionSection">
                <h3 style="color: #9966cc; margin-bottom: 15px;" id="spreadTitle">üí≠ ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÈóÆÈ¢ò</h3>
                <textarea id="threeCardQuestion" class="question-input" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÊÉ≥Ë¶ÅÂí®ËØ¢ÁöÑÂÖ∑‰ΩìÈóÆÈ¢ò..."></textarea>
                <button onclick="startThreeCardReading()" class="start-btn">üÉè ÂºÄÂßã‰∏âÂº†ÁâåÂç†Âçú</button>
            </div>
            
            <div id="threeCardLayout" class="three-card-layout">
                <div class="card-position" id="position1">
                    <div class="position-title" id="title1">Á¨¨‰∏ÄÂº†Áâå</div>
                </div>
                <div class="card-position" id="position2">
                    <div class="position-title" id="title2">Á¨¨‰∫åÂº†Áâå</div>
                </div>
                <div class="card-position" id="position3">
                    <div class="position-title" id="title3">Á¨¨‰∏âÂº†Áâå</div>
                </div>
            </div>
            
            <div id="deckArea" class="deck-area">
                <!-- ÁâåÂ†ÜÂ∞ÜÁî±JavaScriptÁîüÊàê -->
            </div>
            
            <div id="readingResult" class="reading-result">
                <div class="result-title" id="resultTitle">üîÆ ‰∏âÂº†ÁâåËß£ËØª</div>
                <div id="interpretations">
                    <!-- Ëß£ËØªÂÜÖÂÆπÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                </div>
                <button onclick="newReading()" class="new-reading-btn">üîÑ ÈáçÊñ∞Âç†Âçú</button>
            </div>
        </main>
    </div>

    <script>
        const threeCardTarotCards = [
            { name: 'ÊÑöËÄÖ', icon: 'üÉè', meaning: 'Êñ∞ÁöÑÂºÄÂßã‰∏éÂÜíÈô©Ôºå‰øùÊåÅÁ∫ØÁúüÁöÑÂøÉÊÄÅ' },
            { name: 'È≠îÊúØÂ∏à', icon: 'üé©', meaning: 'Ë°åÂä®Âäõ‰∏éÂàõÈÄ†ÂäõÔºåËøêÁî®Êô∫ÊÖßÂÆûÁé∞ÁõÆÊ†á' },
            { name: 'Â•≥Á•≠Âè∏', icon: 'üîÆ', meaning: 'Áõ¥Ëßâ‰∏éÂÜÖÂú®Êô∫ÊÖßÔºåÂÄæÂê¨ÂøÉÁÅµÁöÑÂ£∞Èü≥' },
            { name: 'ÁöáÂêé', icon: 'üë∏', meaning: 'ÂàõÈÄ†Âäõ‰∏é‰∏∞È•∂ÔºåÊØçÊÄßÁöÑÂÖ≥Áà±‰∏éÊªãÂÖª' },
            { name: 'ÁöáÂ∏ù', icon: 'üëë', meaning: 'ÊùÉÂ®Å‰∏éÁß©Â∫èÔºåÂª∫Á´ãÁ®≥ÂÆöÁöÑÁªìÊûÑ' },
            { name: 'ÊïôÁöá', icon: '‚õ™', meaning: '‰º†ÁªüÊô∫ÊÖß‰∏éÁ≤æÁ•ûÊåáÂØºÔºåÂØªÊ±ÇÂØºÂ∏à' },
            { name: 'ÊÅã‰∫∫', icon: 'üíï', meaning: 'ÈÄâÊã©‰∏éÁªìÂêàÔºåÈáçË¶ÅÁöÑ‰∫∫ÈôÖÂÖ≥Á≥ª' },
            { name: 'ÊàòËΩ¶', icon: 'üèÜ', meaning: 'ÊÑèÂøóÂäõ‰∏éËÉúÂà©ÔºåÂùöÊåÅ‰∏çÊáà' },
            { name: 'ÂäõÈáè', icon: 'ü¶Å', meaning: 'ÂÜÖÂú®ÂäõÈáè‰∏éÂãáÊ∞îÔºåÊ∏©ÊüîËÄåÂùöÂÆö' },
            { name: 'ÈöêËÄÖ', icon: 'üïØÔ∏è', meaning: 'ÂÜÖÁúÅ‰∏éÂØªÊ±ÇÔºåÁã¨Á´ãÊÄùËÄÉ' },
            { name: 'ÂëΩËøê‰πãËΩÆ', icon: 'üé°', meaning: 'ÂèòÂåñ‰∏éÊú∫ÈÅáÔºåÂëΩËøêÁöÑËΩ¨Êäò' },
            { name: 'Ê≠£‰πâ', icon: '‚öñÔ∏è', meaning: 'ÂÖ¨Âπ≥‰∏éÂπ≥Ë°°ÔºåÊ≠£Á°ÆÁöÑÂà§Êñ≠' },
            { name: 'ÂÄíÂêä‰∫∫', icon: 'üôÉ', meaning: 'Áâ∫Áâ≤‰∏éÁ≠âÂæÖÔºåÊç¢‰ΩçÊÄùËÄÉ' },
            { name: 'Ê≠ªÁ•û', icon: 'üíÄ', meaning: 'ËΩ¨Âèò‰∏éÈáçÁîüÔºåÁªìÊùü‰∏éÊñ∞ÂºÄÂßã' },
            { name: 'ËäÇÂà∂', icon: 'üßò', meaning: 'Âπ≥Ë°°‰∏éË∞ÉÂíåÔºå‰∏≠Â∫∏‰πãÈÅì' },
            { name: 'È≠îÈ¨º', icon: 'üòà', meaning: 'ÊùüÁºö‰∏éËØ±ÊÉëÔºåÈúÄË¶ÅËßâÈÜí' },
            { name: 'Â°î', icon: 'üóº', meaning: 'Á™ÅÁÑ∂ÂèòÂåñÔºåÁ†¥Èô§ÂπªË±°' },
            { name: 'ÊòüÊòü', icon: '‚≠ê', meaning: 'Â∏åÊúõ‰∏éÁÅµÊÑüÔºåÊåáÂºïÊñπÂêë' },
            { name: 'Êúà‰∫Æ', icon: 'üåô', meaning: 'ÂπªË±°‰∏éÁõ¥ËßâÔºåÈù¢ÂØπÊÅêÊÉß' },
            { name: 'Â§™Èò≥', icon: '‚òÄÔ∏è', meaning: 'ÊàêÂäü‰∏éÂñúÊÇ¶ÔºåÊ≠£Èù¢ËÉΩÈáè' },
            { name: 'ÂÆ°Âà§', icon: 'üìØ', meaning: 'ËßâÈÜí‰∏éÈáçÁîüÔºåÈáçÊñ∞ËØÑ‰º∞' },
            { name: '‰∏ñÁïå', icon: 'üåç', meaning: 'ÂÆåÊàê‰∏éÊàêÂ∞±ÔºåÂúÜÊª°ÁªìÂ±Ä' }
        ];

        let currentSpread = '';
        let selectedCards = [];
        let currentPosition = 0;
        let deckCards = [];

        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        function selectSpread(spreadType) {
            currentSpread = spreadType;
            
            // ÈöêËóèÈÄâÊã©Âô®ÔºåÊòæÁ§∫ÈóÆÈ¢òËæìÂÖ•
            document.getElementById('spreadSelector').style.display = 'none';
            document.getElementById('questionSection').style.display = 'block';
            
            // ËÆæÁΩÆÊ†áÈ¢òÂíå‰ΩçÁΩÆÂêçÁß∞
            const spreadConfigs = {
                'past-present-future': {
                    title: '‚è≥ ËøáÂéª-Áé∞Âú®-Êú™Êù• ‰∏âÂº†ÁâåÂç†Âçú',
                    positions: ['ËøáÂéª', 'Áé∞Âú®', 'Êú™Êù•']
                },
                'situation-action-outcome': {
                    title: 'üéØ Áä∂ÂÜµ-Ë°åÂä®-ÁªìÊûú ‰∏âÂº†ÁâåÂç†Âçú',
                    positions: ['Áä∂ÂÜµ', 'Ë°åÂä®', 'ÁªìÊûú']
                },
                'mind-body-spirit': {
                    title: 'üßò ÂøÉÁÅµ-Ë∫´‰Ωì-Á≤æÁ•û ‰∏âÂº†ÁâåÂç†Âçú',
                    positions: ['ÂøÉÁÅµ', 'Ë∫´‰Ωì', 'Á≤æÁ•û']
                },
                'stop-start-continue': {
                    title: 'üîÑ ÂÅúÊ≠¢-ÂºÄÂßã-ÁªßÁª≠ ‰∏âÂº†ÁâåÂç†Âçú',
                    positions: ['ÂÅúÊ≠¢', 'ÂºÄÂßã', 'ÁªßÁª≠']
                }
            };
            
            const config = spreadConfigs[spreadType];
            document.getElementById('spreadTitle').textContent = config.title;
            
            // ËÆæÁΩÆ‰ΩçÁΩÆÊ†áÈ¢ò
            for (let i = 0; i < 3; i++) {
                document.getElementById(`title${i + 1}`).textContent = config.positions[i];
            }
        }

        function startThreeCardReading() {
            const question = document.getElementById('threeCardQuestion').value.trim();
            if (!question) {
                alert('ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÈóÆÈ¢òÔºÅ');
                return;
            }

            // ÈáçÁΩÆÁä∂ÊÄÅ
            selectedCards = [];
            currentPosition = 0;
            
            // Ê¥óÁâå
            deckCards = [...threeCardTarotCards].sort(() => Math.random() - 0.5);
            
            // ÊòæÁ§∫ÁâåÈòµÂíåÁâåÂ†Ü
            document.getElementById('threeCardLayout').style.display = 'flex';
            document.getElementById('deckArea').style.display = 'flex';
            
            // Ê∏ÖÁ©∫‰πãÂâçÁöÑÁªìÊûú
            document.getElementById('readingResult').classList.remove('show');
            
            // ÈáçÁΩÆ‰ΩçÁΩÆ
            for (let i = 1; i <= 3; i++) {
                const position = document.getElementById(`position${i}`);
                position.classList.remove('filled');
                position.innerHTML = `<div class="position-title">${document.getElementById(`title${i}`).textContent}</div>`;
            }
            
            createThreeCardDeck();
        }

        function createThreeCardDeck() {
            const deckArea = document.getElementById('deckArea');
            deckArea.innerHTML = '<p style="color: #9966cc; margin-bottom: 20px;">ËØ∑‰æùÊ¨°ÊäΩÂèñ‰∏âÂº†Áâå</p>';
            
            // ÂàõÂª∫15Âº†Áâå‰æõÈÄâÊã©
            for (let i = 0; i < 15; i++) {
                const cardElement = document.createElement('div');
                cardElement.className = 'tarot-card';
                cardElement.onclick = () => drawThreeCard(cardElement, i);
                
                cardElement.innerHTML = `
                    <div class="card-back">
                        <div class="card-pattern">üåü</div>
                    </div>
                    <div class="card-front">
                        <div class="card-icon">${deckCards[i].icon}</div>
                        <div class="card-name">${deckCards[i].name}</div>
                        <div class="card-meaning">${deckCards[i].meaning}</div>
                    </div>
                `;
                
                deckArea.appendChild(cardElement);
            }
        }

        function drawThreeCard(cardElement, cardIndex) {
            if (cardElement.classList.contains('flipped') || currentPosition >= 3) return;
            
            cardElement.classList.add('flipped');
            const card = deckCards[cardIndex];
            
            setTimeout(() => {
                placeThreeCardInPosition(card, currentPosition + 1);
                currentPosition++;
                
                if (currentPosition === 3) {
                    setTimeout(() => generateThreeCardReading(), 1000);
                }
            }, 300);
        }

        function placeThreeCardInPosition(card, position) {
            const positionElement = document.getElementById(`position${position}`);
            positionElement.classList.add('filled');
            
            positionElement.innerHTML = `
                <div class="position-title">${document.getElementById(`title${position}`).textContent}</div>
                <div class="tarot-card">
                    <div class="card-front" style="transform: none; position: relative;">
                        <div class="card-icon">${card.icon}</div>
                        <div class="card-name">${card.name}</div>
                        <div class="card-meaning">${card.meaning}</div>
                    </div>
                </div>
            `;
            
            selectedCards[position - 1] = card;
        }

        function generateThreeCardReading() {
            const question = document.getElementById('threeCardQuestion').value;
            const interpretations = document.getElementById('interpretations');
            
            interpretations.innerHTML = `
                <div style="background: rgba(153, 102, 204, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h4 style="color: #9966cc; margin-bottom: 10px;">üìù ÊÇ®ÁöÑÈóÆÈ¢ò</h4>
                    <p style="color: #ccc;">${question}</p>
                </div>
            `;
            
            selectedCards.forEach((card, index) => {
                const interpretation = document.createElement('div');
                interpretation.className = 'interpretation';
                
                const positionTitle = document.getElementById(`title${index + 1}`).textContent;
                const positionMeaning = getThreeCardPositionMeaning(index + 1, card);
                
                interpretation.innerHTML = `
                    <h4>${card.icon} ${positionTitle} - ${card.name}</h4>
                    <p>${positionMeaning}</p>
                `;
                
                interpretations.appendChild(interpretation);
            });
            
            // Ê∑ªÂä†ÁªºÂêàËß£ËØª
            const summary = document.createElement('div');
            summary.className = 'interpretation';
            summary.style.background = 'rgba(106, 90, 205, 0.1)';
            summary.style.borderLeftColor = '#6a5acd';
            
            summary.innerHTML = `
                <h4>üîÆ ÁªºÂêàËß£ËØª</h4>
                <p>${generateThreeCardSummary()}</p>
            `;
            
            interpretations.appendChild(summary);
            
            document.getElementById('readingResult').classList.add('show');
        }

        function getThreeCardPositionMeaning(position, card) {
            const baseMeaning = card.meaning;
            const positionTitle = document.getElementById(`title${position}`).textContent;
            
            const meanings = {
                'ËøáÂéª': `ËøáÂéªÁöÑÂΩ±ÂìçÔºö${baseMeaning}„ÄÇËøô‰∏™ËÉΩÈáèÂΩ±Âìç‰∫ÜÊÇ®ÂΩìÂâçÁöÑÁä∂ÂÜµ„ÄÇ`,
                'Áé∞Âú®': `ÂΩìÂâçÁä∂ÂÜµÔºö${baseMeaning}„ÄÇËøôÊòØÊÇ®Áé∞Âú®ÈúÄË¶ÅÂÖ≥Ê≥®ÁöÑÊ†∏ÂøÉÈóÆÈ¢ò„ÄÇ`,
                'Êú™Êù•': `Êú™Êù•Ë∂ãÂäøÔºö${baseMeaning}„ÄÇÂ¶ÇÊûúÊåâÂΩìÂâçË∂ãÂäøÂèëÂ±ïÔºåËøôÊòØÂèØËÉΩÁöÑÁªìÊûú„ÄÇ`,
                'Áä∂ÂÜµ': `ÂΩìÂâçÁä∂ÂÜµÔºö${baseMeaning}„ÄÇËøô‰ª£Ë°®ÊÇ®Áé∞Âú®Èù¢‰∏¥ÁöÑ‰∏ªË¶ÅÊÉÖÂÜµ„ÄÇ`,
                'Ë°åÂä®': `Âª∫ËÆÆË°åÂä®Ôºö${baseMeaning}„ÄÇËøôÊòØÊÇ®Â∫îËØ•ÈááÂèñÁöÑË°åÂä®ÊñπÂêë„ÄÇ`,
                'ÁªìÊûú': `ÂèØËÉΩÁªìÊûúÔºö${baseMeaning}„ÄÇÂ¶ÇÊûúÊåâÂª∫ËÆÆË°åÂä®ÔºåËøôÊòØÂèØËÉΩÁöÑÁªìÊûú„ÄÇ`,
                'ÂøÉÁÅµ': `ÂøÉÁÅµÁä∂ÊÄÅÔºö${baseMeaning}„ÄÇËøôÂèçÊò†‰∫ÜÊÇ®ÂÜÖÂøÉÁöÑÊÉ≥Ê≥ïÂíåÊÉÖÊÑüÁä∂ÊÄÅ„ÄÇ`,
                'Ë∫´‰Ωì': `Ë∫´‰ΩìÁä∂ÊÄÅÔºö${baseMeaning}„ÄÇËøôÂÖ≥‰∫éÊÇ®ÁöÑÂÅ•Â∫∑ÂíåÁâ©Ë¥®Â±ÇÈù¢ÁöÑÁä∂ÂÜµ„ÄÇ`,
                'Á≤æÁ•û': `Á≤æÁ•ûÁä∂ÊÄÅÔºö${baseMeaning}„ÄÇËøô‰ª£Ë°®ÊÇ®ÁöÑÁ≤æÁ•ûËøΩÊ±ÇÂíåÁÅµÊÄßÊàêÈïø„ÄÇ`,
                'ÂÅúÊ≠¢': `Â∫îËØ•ÂÅúÊ≠¢Ôºö${baseMeaning}„ÄÇËøôÊèêÈÜíÊÇ®ÈúÄË¶ÅÂÅúÊ≠¢ÊàñÊîπÂèòÁöÑÊñπÈù¢„ÄÇ`,
                'ÂºÄÂßã': `Â∫îËØ•ÂºÄÂßãÔºö${baseMeaning}„ÄÇËøôÂª∫ËÆÆÊÇ®Â∫îËØ•ÂºÄÂßãÂ∞ùËØïÁöÑÊñ∞ÊñπÂêë„ÄÇ`,
                'ÁªßÁª≠': `Â∫îËØ•ÁªßÁª≠Ôºö${baseMeaning}„ÄÇËøôÊòØÊÇ®Â∫îËØ•ÂùöÊåÅÂíåÂèëÂ±ïÁöÑÊñπÈù¢„ÄÇ`
            };
            
            return meanings[positionTitle] || `${positionTitle}Ôºö${baseMeaning}`;
        }

        function generateThreeCardSummary() {
            const summaries = {
                'past-present-future': 'ÈÄöËøáËøáÂéª-Áé∞Âú®-Êú™Êù•ÁöÑ‰∏âÂº†ÁâåÔºåÊÇ®ÂèØ‰ª•Ê∏ÖÊ•öÂú∞ÁúãÂà∞‰∫ãÊÉÖÁöÑÂèëÂ±ïËÑâÁªú„ÄÇËøáÂéªÁöÑÁªèÂéÜÂΩ±ÂìçÁùÄÁé∞Âú®ÔºåËÄåÁé∞Âú®ÁöÑÈÄâÊã©Â∞ÜÂ°ëÈÄ†Êú™Êù•„ÄÇËØ∑ÁªºÂêàËÄÉËôëÊó∂Èó¥Á∫ø‰∏äÁöÑÊâÄÊúâ‰ø°ÊÅØÔºåÂÅöÂá∫ÊòéÊô∫ÁöÑÂÜ≥ÂÆö„ÄÇ',
                'situation-action-outcome': 'Áä∂ÂÜµ-Ë°åÂä®-ÁªìÊûúÁöÑÂç†Âçú‰∏∫ÊÇ®Êèê‰æõ‰∫ÜËß£ÂÜ≥ÈóÆÈ¢òÁöÑÊ∏ÖÊô∞Ë∑ØÂæÑ„ÄÇ‰∫ÜËß£Áé∞Áä∂„ÄÅÈááÂèñÊ≠£Á°ÆË°åÂä®„ÄÅËé∑ÂæóÁêÜÊÉ≥ÁªìÊûú„ÄÇÊØè‰∏ÄÊ≠•ÈÉΩÂæàÈáçË¶ÅÔºåËØ∑ÊåâÁÖßÊåáÂºïÂâçËøõ„ÄÇ',
                'mind-body-spirit': 'ÂøÉÁÅµ-Ë∫´‰Ωì-Á≤æÁ•ûÁöÑÂç†ÂçúÂ∏ÆÊÇ®‰∫ÜËß£ÂÖ®Èù¢ÁöÑËá™ÊàëÁä∂ÊÄÅ„ÄÇÂπ≥Ë°°Ëøô‰∏â‰∏™Â±ÇÈù¢ÊòØÂÅ•Â∫∑ÁîüÊ¥ªÁöÑÂÖ≥ÈîÆ„ÄÇÊ≥®ÊÑèÊØè‰∏™ÊñπÈù¢ÁöÑÈúÄÊ±ÇÔºåÂØªÊ±ÇÊï¥‰ΩìÁöÑÂíåË∞ê„ÄÇ',
                'stop-start-continue': 'ÂÅúÊ≠¢-ÂºÄÂßã-ÁªßÁª≠ÁöÑÊåáÂºï‰∏∫ÊÇ®ÁöÑ‰∫∫ÁîüÊèê‰æõ‰∫ÜÊòéÁ°ÆÁöÑÊñπÂêë„ÄÇÁü•ÈÅì‰ªÄ‰πàËØ•Êîæ‰∏ãÔºå‰ªÄ‰πàËØ•ÂºÄÂßãÔºå‰ªÄ‰πàËØ•ÂùöÊåÅÔºåÊòØÊô∫ÊÖßÁîüÊ¥ªÁöÑ‰ΩìÁé∞„ÄÇ'
            };
            
            return summaries[currentSpread] || '‰∏âÂº†Áâå‰∏∫ÊÇ®Êèê‰æõ‰∫ÜÂÆùË¥µÁöÑÊ¥ûÂØü„ÄÇËØ∑‰ªîÁªÜËÄÉËôëÊØèÂº†ÁâåÁöÑÂê´‰πâÔºåÂÆÉ‰ª¨ÂÖ±Âêå‰∏∫ÊÇ®ÊåáÊòé‰∫ÜÂâçËøõÁöÑÊñπÂêë„ÄÇ';
        }

        function newReading() {
            // ÈáçÁΩÆÊâÄÊúâÁä∂ÊÄÅ
            currentSpread = '';
            selectedCards = [];
            currentPosition = 0;
            deckCards = [];
            
            // ÊòæÁ§∫ÈÄâÊã©Âô®ÔºåÈöêËóèÂÖ∂‰ªñÈÉ®ÂàÜ
            document.getElementById('spreadSelector').style.display = 'grid';
            document.getElementById('questionSection').style.display = 'none';
            document.getElementById('threeCardLayout').style.display = 'none';
            document.getElementById('deckArea').style.display = 'none';
            document.getElementById('readingResult').classList.remove('show');
            
            // Ê∏ÖÁ©∫ÈóÆÈ¢òËæìÂÖ•
            document.getElementById('threeCardQuestion').value = '';
        }

        document.addEventListener('DOMContentLoaded', createStars);
    </script>

    <!-- ÂÖ¨ÂÖ±ÂØºËà™Ê†èËÑöÊú¨ -->
    <script src="../../components/navigation.js"></script>
</body>
</html> 